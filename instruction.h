#pragma once

#include "mem.h"

#include <stdint.h>
#include <stdbool.h>

////////////////////////////////////////////////////////////////////////////////
// Type declarations
////////////////////////////////////////////////////////////////////////////////

typedef uint16_t instruction_id;

typedef error_t (*instruction_pf)(void *);

typedef struct _instruction_info {
    instruction_pf func;
    mem_size extra; // How large (minus the leading 2 bytes) is the instruction?
} instruction_info;

////////////////////////////////////////////////////////////////////////////////
// Global variable declarations
////////////////////////////////////////////////////////////////////////////////

extern instruction_info instructions[];

////////////////////////////////////////////////////////////////////////////////
// Function declarations
////////////////////////////////////////////////////////////////////////////////

extern bool valid_instruction(instruction_id ins);
